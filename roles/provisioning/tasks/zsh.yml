---
#- name: Installing Oh-My-Zsh (to test)
#  command: sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)" "" --unattended

- name: Download Oh-My-Zsh
  get_url:
    url: https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh
    dest: /home/{{ user }}/install.sh

- name: Install Oh-My-Zsh
  script: /home/{{ user }}/install.sh
  args:
    creates: /home/{{ user }}/.oh-my-zsh
    
- name: Clean Oh-My-Zsh artifacts
  file:
    path: /home/{{ user }}/install.sh
    state: absent

#- name: Configuring .zprofile (to test)
#  copy:
#    src: files/dotfiles/.zprofile
#    dest: "/home/{{ user }}/.zprofile"
#
#- name: Configuring .zshrc (to test) # do this after installing oh-my-zsh to not lose the .zshrc
#  copy:
#    src: files/dotfiles/.zshrc
#    dest: "/home/{{ user }}/.zshrc"
#
##- name: Configuring Powerlevel10k (to test)
##  command: echo 'source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme' >> /home/{{ user }}/.zshrc
##  copy:
##    src: files/dotfiles/.p10k.zsh
##    dest: "/home/{{ user }}/.p10k.zsh"
#
#- name: Configuring Powerlevel10k
#  lineinfile:
#    path: /home/{{ user }}/.zshrc
#    line: 'source /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme'
#  
#- name: Cloning zsh-autosuggestions pluging (to test)
#  git:
#      repo: https://github.com/zsh-users/zsh-autosuggestions.git
#      dest: /home/{{ user }}/.oh-my-zsh/custom/plugins/zsh-autosuggestions
#  copy:
#    src: files/dotfiles/.oh-my-zsh/custom/my-zsh-autosuggestions-config.zsh
#    dest: "/home/{{ user }}/.oh-my-zsh/custom/my-zsh-autosuggestions-config.zsh"
#
#- name: Cloning zsh-syntax-highlighting pluging (to test)
#  git:
#      repo: https://github.com/zsh-users/zsh-syntax-highlighting.git
#      dest: /home/{{ user }}/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting
#
#- name: Cloning zsh-completions
#  git:
#      repo: https://github.com/zsh-users/zsh-completions.git
#      dest: /home/{{ user }}/.oh-my-zsh/custom/plugins/zsh-completions